.row.ideas_row
  - items.each_with_index do |item, index|
    - if index % ideas_rows == 0
      - if index > 0
        </div>
      <div class='span4'>
    - if recent_draft = items[index]
      %div{class: "popular #{index % ideas_rows != 0 ? 'gap' : ''}"}
        %h3.title=link_to shorten(recent_draft.title, 100, 20, "Â»#{index}"), idea_path(recent_draft), id: "ab_section_#{section}_#{index}_link"
        %div{id: "draft_bar#{index+item_counter}", class: "bar"}
          - for_portion, for_, against_portion, against_ = items_counts[recent_draft.id]
          - for_length = [35, (280-5-35)*for_portion].max
          .for{style: "width: #{for_portion * 100 * 90 / 100}%"}
            = for_
          .against{style: "width: #{against_portion * 100 * 90 / 100}%"}
            = against_
  </div>  
.row
  .span12.separator
